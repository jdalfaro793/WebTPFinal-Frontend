<div class="container rounded my-5 ">
    <div class="row  justify-content-center  p-2 ">
        <div class=" d-sm-none d-md-block col-5 bg-panel-left p-0">
            <div class="w-100 h-100 bg-container">

            </div>
        </div>
        <div class="col-12 col-md-7 bg-form">
            <div class="col-12 mb-4  border-bottom border-4">
                <h1 class="text-center fs-1 text-white fw-bold my-5">Registrar Alumno</h1>
            </div>
            <!-- **************************************************************** -->
            <!-- ********************** FORMULARIO ****************************** -->
            <!-- **************************************************************** -->

            <div class=" col-12 p-3 "> 
                <div class=" p-2 rounded">
                    <form class="" #formAlumno = "ngForm">
                        <div class="form-floating mb-3 ">
                            <input required solo-letras type="text" name="apellido" [(ngModel)]="alumno.apellido" #apellido="ngModel" class="form-control " id="apellido" placeholder=""> 
                            <label for="apellido">Apellido</label>
                            <div *ngIf="apellido.invalid && (apellido.touched || apellido.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                <p  class="mx-4" *ngIf="apellido.errors.required"> Campo requerido</p>
                                <p  class="mx-4" *ngIf="apellido.errors.soloLetras"> Debe ingresar solo letras</p>
                            </div>
                        </div>
                        <div class="form-floating mb-3">
                            <input required solo-letras type="text" name="nombre" [(ngModel)]="alumno.nombre" #nombre="ngModel" class="form-control" id="nombre" placeholder="">
                            <label for="nombre">Nombre</label>
                            <div *ngIf="nombre.invalid && (nombre.touched || nombre.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                <p  class="mx-4" *ngIf="nombre.errors.required"> Campo requerido</p>
                                <p  class="mx-4" *ngIf="nombre.errors.soloLetras"> Debe ingresar solo letras</p>
                            </div>
                        </div>
                        <div class="form-floating mb-3">
                            <input required maxlength="8" minlength="6" solo-numeros type="text" name="dni" [(ngModel)]="alumno.dni" #dni="ngModel" class="form-control" id="dni" placeholder="">
                            <label for="dni">DNI</label>
                            <div *ngIf="dni.invalid && (dni.touched || dni.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                <p  class="mx-4" *ngIf="dni.errors.required"> Campo requerido</p>
                                <p  class="mx-4" *ngIf="dni.errors.minlength"> Debe ingresar mas de 6 dígitos</p>
                                <p  class="mx-4" *ngIf="dni.errors.soloNumeros"> Debe ingresar solo números</p>
                            </div>
                        </div>
                        
                        <div *ngIf="accion == 'new'" class="row row-cols-1 row-cols-md-2">
                            <div class=" col form-floating mb-3">
                                <input required type="date" name="fecha_nacimiento" [(ngModel)]="alumno.fecha_nacimiento" #nacimiento = "ngModel" class="form-control" id="fechaNac" placeholder=""
                                    style="height: 80px">
                                <label for="fechaNac">Fecha De Nacimiento</label>
                                <div *ngIf="nacimiento.invalid && (nacimiento.touched || nacimiento.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                    <p  class="mx-4" *ngIf="nacimiento.errors.required">Campo requerido</p>
                                </div>
                            </div>
                            <div class="col form-floating mb-3">
                                <input required solo-numeros type="text" name="celular" [(ngModel)]="alumno.celular" #celular = "ngModel" class="form-control" id="celular" placeholder="">
                                <label for="celular">Celular</label>
                                <div *ngIf="celular.invalid && (celular.touched || celular.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                    <p  class="mx-4" *ngIf="celular.errors.required"> Campo requerido</p>
                                    <p  class="mx-4" *ngIf="celular.errors.soloNumeros"> Debe ingresar solo números</p>
                                </div>
                            </div>
                        </div>

                        
                        <div *ngIf="accion == 'update'" class="col form-floating mb-3">
                            <input required solo-numeros type="text" name="celular" [(ngModel)]="alumno.celular" #celular = "ngModel" class="form-control" id="celular" placeholder="">
                            <label for="celular">Celular</label>
                            <div *ngIf="celular.invalid && (celular.touched || celular.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                <p  class="mx-4" *ngIf="celular.errors.required"> Campo requerido</p>
                                <p  class="mx-4" *ngIf="celular.errors.soloNumeros"> Debe ingresar solo números</p>
                            </div>
                        </div>
                        
    
                        <div class=" col form-floating mb-3">
                            <input required type="text" name="domicilio" [(ngModel)]="alumno.domicilio" #domicilio = "ngModel" class="form-control" id="domicilio" placeholder="">
                            <label for="domicilio">Domicilio</label>
                            <div *ngIf="domicilio.invalid && (domicilio.touched || domicilio.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                <p  class="mx-4" *ngIf="domicilio.errors.required"> Campo requerido</p>
                            </div>
                        </div>
                        <div class=" col form-floating mb-3">
                            <input required type="text" email name="email" [(ngModel)]="alumno.email" #email= "ngModel" class="form-control" id="email" placeholder="">
                            <label for="email">Email</label>
                            <div *ngIf="email.invalid && (email.touched || email.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                <p  class="mx-4" *ngIf="email.errors.required"> Campo requerido</p>
                                <p  class="mx-4" *ngIf="email.errors.email"> Formato de email incorrecto</p>
                            </div>
                        </div>
    
                        <div class="form-floating mb-3">
                            <select required class="form-select" id="floatingSelect" aria-label="Floating label select example"
                            name="plan" [(ngModel)]="alumno.plan" #plan="ngModel">
                                <option *ngFor="let plan of planes" [ngValue]="plan">{{plan.nombre}},  ${{plan.precio}}</option>
                            </select>
                            <label for="floatingSelect">Plan</label>
                            <div *ngIf="plan.invalid && (plan.touched || plan.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                <p  class="mx-4" *ngIf="plan.errors.required"> Campo requerido</p>
                            </div>
                        </div>
                        <div class="col-12 mb-3 pb-0 border-bottom border-4">
                            <h3 class="text-center  text-white fw-bold my-3">Sección Usuario</h3>
                        </div>
                        <div class="form-floating mb-3">
                            <input required type="text" name="username" [(ngModel)]="usuario.username" (ngModelChange)="validarUserName(username)" #username = "ngModel" class="form-control" id="usuario" placeholder="">
                            <label for="usuario">Nombre de Usuario</label>
                            <div *ngIf="username.invalid && (username.touched || username.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                <p  class="mx-4" *ngIf="username.errors.required"> Campo requerido</p>
                            </div>
                            <div *ngIf="usuarioValido == false" class=" m-0 p-0 alert alert-danger align-items-center">
                                <p  class="mx-4" >El nombre de usuario ya existe</p>
                            </div>
                        </div>
                        <div class="form-floating mb-3">
                            <input required  type="text"  name="password" [(ngModel)]="usuario.password" #passwd = "ngModel" class="form-control" id="password" placeholder="">
                            <label for="password">Password</label>
                            <div *ngIf="passwd.invalid && (passwd.touched || passwd.dirty)" class=" m-0 p-0 alert alert-danger align-items-center">
                                <p  class="mx-4" *ngIf="passwd.errors.required"> Campo requerido</p>
                            </div>
                        </div>
                    </form>
                    <div class="row p-2">
                        <div *ngIf="accion == 'new'" class=" col-12 col-md-6 text-center mb-3 ">
                            <button [disabled]="formAlumno.invalid" class="w-100 btn btn-dark p-3 fs-6  fw-bold" 
                            (click)="guardarAlumno(formAlumno)">GUARDAR</button>
                        </div>
                        <div *ngIf="accion == 'update'" class=" col-12 col-md-6 text-center mb-3 ">
                            <button [disabled]="formAlumno.invalid" class="w-100 btn btn-dark p-3 fs-6  fw-bold" 
                            (click)="modificarAlumno(formAlumno)">MODIFICAR</button>
                        </div>
                        <div class=" col-12 col-md-6 text-center mb-3">
                            <button (click)="cancelar()" type="button" class=" w-100 btn btn-danger p-3 fs-6 fw-bold">CANCELAR</button>
                        </div>
                      
                    </div>        
                </div>               
            </div>
        </div>
        
    </div>
</div>
